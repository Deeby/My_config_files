#!/usr/bin/env zsh

cd $HOME/git/My_config_files/
COUNT1=`git status | sed '/[А-Яа-я]/d' | sed '/^$/d' | wc -l`
COUNT2=`git status | grep -c "изменено"`
COUNT3=`git status | grep -c "удалено"`
if [[ $COUNT1 -gt 0 ]]||[[ $COUNT2 -gt 0 ]]||[[ $COUNT3 -gt 0 ]]; then
    git add --all && 
    git commit -m "Update" && 
    git push &&
    rsync -ruptgo --exclude ".git" --delete --progress /home/haron/git/My_config_files /home/haron/git/BitBuket/ &&
    cd $HOME/git/BitBuket/My_config_files &&
    git add --all && 
    git commit -m "Update" && 
    git push &&
    rsync -ruptgo --exclude ".git" --delete --progress /home/haron/git/My_config_files /home/haron/git/GitLab/ &&
    git add --all && 
    git commit -m "Update" && 
    git push &&
    cd $HOME/git/My_config_files/
    echo "\n== BackUp is complete =="
else
    echo "\n== There is nothing to save =="
fi
