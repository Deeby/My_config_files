#!/usr/bin/env zsh
# Author - Haron Prime
# License Â© 2017 WTFPL http://www.wtfpl.net/

while true; do
    ALL=`free | grep Mem | awk '{print $2}'`
    AV=`free | grep Mem | awk '{print $7}'`
    PRC=`bc -l <<< "$ALL/100"`
    FREE=`bc <<< "$AV/$PRC"`
    USED=`bc <<< "100-$FREE"`
    if [ $USED -gt 50 ] ; then
          tmp="0$(printf "%x\n" $((255-($USED-50)*5)))"
          echo "<fc=#ff${tmp: -2}00>$USED%</fc>" > /tmp/haron/MU
          else tmp="0$(printf "%x\n" $(( 5*$USED )))ff00"
          echo "<fc=#${tmp: -6}>$USED%</fc>" > /tmp/haron/MU
    fi
    sleep 1
done
